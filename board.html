<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="./assets/img/favicon.png">
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="./styles/fonts.css" />
    <link rel="stylesheet" href="./styles/standard.css" />
    <link rel="stylesheet" href="./styles/sidebar.css">
    <link rel="stylesheet" href="./styles/sidebar_nav_main.css">
    <link rel="stylesheet" href="./styles/navbar.css">
    <link rel="stylesheet" href="./styles/summary.css">
    <link rel="stylesheet" href="./styles/board.css">
    <link rel="stylesheet" href="./styles/task_detail_overlay.css" />
    <link rel="stylesheet" href="./styles/task_detail_edit_overlay.css" />
    <link rel="stylesheet" href="./styles/add_task.css" />
    <link rel="stylesheet" href="./styles/add_task_overlay.css" />
    <link rel="stylesheet" href="./styles/mobile_footer.css">
    <link rel="stylesheet" href="./styles/mobile_board.css">
    <link rel="stylesheet" href="./styles/toastmessage.css">
    <script src="./script.js" defer></script>
    <script src="./scripts/variables.js" defer></script>
    <script src="./templates/board_templates.js" defer></script>
    <script src="./templates/sidebar_navbar_template.js" defer></script>
    <script src="./templates/summary_content.js" defer></script>
    <script src="./templates/task_detail_overlay_template.js" defer></script>
    <script src="./templates/add_task_overlay_template.js" defer></script>
    <script src="./scripts/board.js" defer></script>
    <script src="./scripts/add_task.js" defer></script>
    <script src="./scripts/task_detail_overlay.js" defer></script>
    <script src="./scripts/add_edit_contact_overlay.js" defer></script>
    <script src="./scripts/get_data.js" defer></script>
    <script src="./scripts/firebase.js" defer></script>
    <title>Board</title>
  </head>
  <body onload="init(), loadContentBoard()">
    <div class="order_sidebar_main">
      <aside class="sidebar desktop" id="id_sidebar">    
      </aside>

      <div class = "nav_main_content">
        <nav class="nav_bar" id="id_navbar">
        </nav>

        <main class="margin_left margin_top content_wrapper_sidebar">
          <section class="order_header_board">
            <div class="board_mobile_header">
              <h1>Board</h1>
              <button class="btn_add_task_board_mobile button" onclick="openAddTaskDialog()"><img class="icon_add_btn" src="./assets/img/add_white.svg" alt=""></button>
            </div>
            <div class="order_header_right_side">
              <div class="style_searchbar_board">
                <input class="style_input_searchbar" type="text" placeholder="Find Task" onkeyup="filterTasks()"">
                <div class="border_searchbar"></div>
                <div class="style_search_icon_box">
                  <img class="style_search_icon" src="./assets/img/search.svg" alt="">
                </div>
              </div>
              <button class="btn_add_task_board button" onclick="openAddTaskDialog()">Add Task<img class="icon_add_btn" src="./assets/img/add_white.svg" alt=""></button>
            </div>
          </section> 

          <section class="order_board_sections">
            <!-- Board -->
            <!-- To Do -->
            <div class="order_elements_in_section">
              <div class="order_elements_in_section_header">
                <p class="text_section">To Do</p>
                <img class="img_add_btn" src="./assets/img/add_square_default.svg" alt="Add Task Button" onclick="openAddTaskDialog()" role="button" aria-label="Add Task">
              </div>
              <div class="width_section" ondrop="drop('todo')" ondragover="allowDrop(event)">
                <div class="no_task_available" id="board_column_todo" data-initialized= "false">
                  <p>No tasks in To Do</p>
                </div>
              </div>
            </div>
            <!-- In Progress-->
            <div class="order_elements_in_section">
              <div class="order_elements_in_section_header">
                <p class="text_section">In Progress</p>
                <img class="img_add_btn" src="./assets/img/add_square_default.svg" alt="Add Task Button" onclick="openAddTaskDialog()" role="button" aria-label="Add Task">
              </div>
              <div class="width_section" ondrop="drop('inProgress')" ondragover="allowDrop(event)">
                <div class="no_task_available" id="board_column_inProgress" data-initialized= "false">
                  <p>No tasks in Progress</p>
                </div>
              </div>                                   
            </div> 
            <!-- Await Feedback -->
            <div class="order_elements_in_section">
              <div class="order_elements_in_section_header">
                <p class="text_section">Await Feedback</p>
                <img class="img_add_btn" src="./assets/img/add_square_default.svg" alt="Add Task Button" onclick="openAddTaskDialog()" role="button" aria-label="Add Task">
              </div>
              <div class="width_section" ondrop="drop('awaitFeedback')" ondragover="allowDrop(event)">
                <div class="no_task_available" id="board_column_awaitFeedback" data-initialized= "false">
                  <p>No tasks in Await Feedback</p>
                </div>
              </div>
            </div>
            <!-- Done -->
            <div class="order_elements_in_section">
              <p class="text_section">Done</p>
              <div class="width_section" ondrop="drop('done')" ondragover="allowDrop(event)">
                <div class="no_task_available" id="board_column_done" data-initialized= "false">
                  <p>No tasks in Done</p>
                </div>  
              </div>                           
            </div>
          </section>
        </main>
        <footer id="mobile_footer"></footer>

        <dialog class="dialog_add_task_container" id="addTaskDialog">
          <main>
            <form class="add_task_overlay_wrapper content_wrapper" id="addTaskForm" novalidate>
              <div class="close_btn_container">
                <img class="close_btn" src="./assets/img/x.svg" alt="Close Button" onclick="closeAddTaskDialog()" role="button" aria-label="Close Dialog">
              </div>    
              <div>
                <h1>Add Task</h1>
              </div>

              <div class="add_task_form_container">
                <section class="formfield_left">
                  <div class="formfield_left_wrapper">
                    <label for="id_title_add_task" class="label_text">Title<sup>*</sup></label><br>
                    <input type="text" class="add_task_input styled_input validate_required" id="id_title_add_task" placeholder="Enter a title" oninput="handleRequiredMessage(this); limitInputLength(this, 35)" onfocus="handleRequiredMessage(this)" onblur="handleRequiredMessage(this)"><br>
                    <span class="required_message" data-for="id_title_add_task">This field is required</span><br>
                  </div>

                  <label for="id_description_add_task" class="label_text">Description</label><br>
                  <textarea class="add_task_description styled_input_description" id="id_description_add_task" placeholder="Enter a description" oninput="limitInputLength(this, 95)"></textarea><br>

                  <div class="formfield_left_wrapper">
                    <label for="id_due_date_add_task" class="label_text">Due Date<sup>*</sup></label><br>
                    <input type="date" class="add_task_input styled_input validate_required" id="id_due_date_add_task" oninput="handleRequiredMessage(this)" onfocus="handleRequiredMessage(this)" onblur="handleRequiredMessage(this)"><br>
                    <span class="required_message" data-for="id_due_date_add_task">This field is required</span><br>
                  </div>
                </section>

                <div class="vertical_line"></div>

                <section class="formfield_right">
                  <label class="label_text">Priority</label><br>
                  <div class="priority_options">
                    <button type="button" class="urgent_btn_default" id="id_urgent_btn" onclick="checkPriority('urgent')">Urgent
                      <img id ="id_icon_urgent_task" src="./assets/img/prio_urgent_red.svg" alt="Priority Urgent">
                    </button>
                    <button type="button" class="medium_btn_filled" id="id_medium_btn" onclick="checkPriority('medium')">Medium
                      <img id ="id_icon_medium_task" class="icon hover" src="./assets/img/prio_medium_white.svg" alt="Priority Medium Hover">
                    </button>
                    <button type="button" class="low_btn_default" id="id_low_btn" onclick="checkPriority('low')">Low
                      <img  id ="id_icon_low_task" src="./assets/img/prio_low_green.svg" alt="Priority Low">
                    </button>
                  </div>

                  <label class="label_text">Assigned to</label><br>
                  <div class="dropdown" data-type="contacts">
                    <div class="dropdown_input add_task_input_dropdown styled_input" onclick="toggleListTasks('contacts')">
                      <span class="dropdown_text" id="selected_contacts">Select contacts to assign</span>
                      <div class="dropdown_icon"></div>
                    </div>
                    <ul class="dropdown_list_contacts" id="contacts_list_task" style="display:none;">
                    </ul>
                  </div>
                  <div class="assigned_contacts_row" id="assigned_contacts_row"></div>
                  <div class="input_spacer"></div>

                  <label class="label_text">Category<sup>*</sup></label><br>
                  <div class="dropdown" data-type="category">
                    <div class="dropdown_input add_task_input_dropdown styled_input" onclick="toggleListTasks('category')">
                      <span class="dropdown_text" id="selected_category">Select task category</span>
                      <div class="dropdown_icon"></div>
                    </div>
                    <ul class="dropdown_list" id="category_list_task" style="display:none;">
                      <li class="dropdown_item" onclick="selectCategory(this)">Technical Task</li>
                      <li class="dropdown_item" onclick="selectCategory(this)">User Story</li>
                    </ul>
                  </div>
                  <div class="input_spacer"></div>

                  <section class="subtask_wrapper">
                    <label for="subtasks" class="label_text">Subtasks</label><br>
                    <div class="input_container">
                      <input type="text" id="subtasks" class="add_task_input styled_input" placeholder="Add new subtask" oninput="limitInputLength(this, 25)">
                      <div class="subtask_actions">
                        <button class="subtask_btn" type="button" onclick="cancelSubtask()">
                          <img class="cancel_subtask" src="./assets/img/close.svg" alt="Cancel Subtask">
                        </button>
                        <div class="subtask_divider"></div>
                        <button class="subtask_btn" type="button" onclick="addSubtask()">
                          <img class="submit_subtask" src="./assets/img/check.svg" alt="Submit Subtask">
                        </button>
                      </div>
                    </div>
                    <ul id="subtaskList"></ul>
                  </section>
                  <p class="required-mobile"><sup>*</sup>This field is required</p> 

                </section>
              </div>

              <div class="add_task_bottom_area">
                <div  class="required-desktop">
                  <p><sup>*</sup>This field is required</p>
                </div>
                <div class="add_task_btn_area">
                  <button type="button" class="clear_btn" onclick="clearInputs()">Clear
                    <img class="icon default" src="./assets/img/close.svg" alt="Clear Formular">
                    <img class="icon hover" src="./assets/img/close_blue.svg" alt="Clear Formular Hover">
                  </button>
                  <button type="submit" id="id_btn_create_task" class="create_task_btn">Create Task<img src="./assets/img/check_white.svg" alt="Create Task"></button>
                </div>
              </div>
            </form>
          </main>
        </dialog>
        <dialog class="dialog_task_detail_container" id="taskDetailDialog"></dialog>
        <dialog class="dialog_task_detail_edit_container" id="taskDetailEditDialog">
          <main class="task_detail_edit_wrapper" data-task_detail_information-id="${taskID}">
            <div class="close_btn_container_task_detail_edit">
                <img class="close_btn" src="./assets/img/x.svg" alt="Close Button" onclick="closeTaskDetailEditDialog()" role="button" aria-label="SchlieÃŸen">
            </div>

            <form class="form_content" id="taskDetailEditForm" novalidate></form>
              <div class="">
                <section class="form_wrapper">
                  <div>
                    <label for="id_title_add_task" class="label_text_edit">Title<sup>*</sup></label><br>
                    <input type="text" class="task_detail_edit_input styled_input_edit validate_required" id="id_title_add_task" placeholder="Enter a title" oninput="handleRequiredMessage(this); limitInputLength(this, 35)" onfocus="handleRequiredMessage(this)" onblur="handleRequiredMessage(this)"><br>
                    <span class="required_message" data-for="id_title_add_task">This field is required</span><br>
                  </div>

                  <label for="id_description_add_task" class="label_text_edit">Description</label><br>
                  <textarea class="task_detail_edit_description styled_input_edit_description" id="id_description_add_task" placeholder="Enter a description" oninput="limitInputLength(this, 95)"></textarea><br>
              
                  <div>
                    <label for="id_due_date_add_task" class="label_text_edit">Due Date<sup>*</sup></label><br>
                    <input type="date" class="task_detail_edit_input styled_input_edit validate_required" id="id_due_date_add_task" oninput="handleRequiredMessage(this)" onfocus="handleRequiredMessage(this)" onblur="handleRequiredMessage(this)"><br>
                    <span class="required_message" data-for="id_due_date_add_task">This field is required</span><br>
                  </div>
                </section>

                <section class="form_wrapper">
                  <label class="label_text_edit">Priority</label><br>
                  <div class="priority_options_edit">
                    <button type="button" class="urgent_btn_default" id="id_urgent_btn" onclick="checkPriority('urgent')">Urgent
                      <img id ="id_icon_urgent_task" src="./assets/img/prio_urgent_red.svg" alt="Priority Urgent">
                    </button>
                    <button type="button" class="medium_btn_filled" id="id_medium_btn" onclick="checkPriority('medium')">Medium
                      <img id ="id_icon_medium_task" class="icon hover" src="./assets/img/prio_medium_white.svg" alt="Priority Medium Hover">
                    </button>
                    <button type="button" class="low_btn_default" id="id_low_btn" onclick="checkPriority('low')">Low
                      <img  id ="id_icon_low_task" src="./assets/img/prio_low_green.svg" alt="Priority Low">
                    </button>
                  </div>

                  <label class="label_text_edit">Assigned to</label><br>
                  <div class="dropdown" data-type="contacts">
                    <div class="dropdown_input task_detail_edit_input styled_input_edit" onclick="toggleListTasks('contacts')">
                      <span class="dropdown_text" id="selected_contacts">Select contacts to assign</span>
                      <div class="dropdown_icon"></div>
                    </div>
                    <ul class="dropdown_list_contacts" id="contacts_list_task" style="display:none;">
                    </ul>
                  </div>
                  <div class="assigned_contacts_row" id="assigned_contacts_row"></div>
                  <div class="input_spacer"></div>

                  <section class="subtask_wrapper">
                    <label for="subtasks" class="label_text_edit">Subtasks</label><br>
                    <div class="input_container">
                      <input type="text" id="subtasks" class="task_detail_edit_input styled_input_edit" placeholder="Add new subtask" oninput="limitInputLength(this, 25)">
                      <div class="subtask_actions">
                        <button class="subtask_btn" type="button" onclick="cancelSubtask()">
                          <img class="cancel_subtask" src="./assets/img/close.svg" alt="Cancel Subtask">
                        </button>
                        <div class="subtask_divider"></div>
                        <button class="subtask_btn" type="button" onclick="addSubtask()">
                          <img class="submit_subtask" src="./assets/img/check.svg" alt="Submit Subtask">
                        </button>
                      </div>
                    </div>
                    <ul id="subtaskList"></ul>
                  </section>
                </section>
              </div>

              <div class="task_detail_edit_btn">
                <button type="submit" class="ok_btn">Ok<img src="./assets/img/check_white.svg" alt="Edit Button"></button>
              </div>
            </form>
          </main>
        </dialog>
      </div>
    </div>
      <div id="msgBox" class="toast-message toast-message-board" ><p>Task added to board</p> <img src="./assets/img/board_icon.svg" alt="a board icon"></div>
  </body>
</html>